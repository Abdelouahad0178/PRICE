<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="WhatsApp Web - Restez connecté avec vos proches">
  <meta name="keywords" content="whatsapp, chat, messages, appels">
  <meta name="author" content="WhatsApp Enhanced">
  
  <title>WhatsApp Web - Chat & Appels</title>
  
  <link rel="icon" type="image/png" href="./favicon.png">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="./favicon.png">
  
  <!-- Preload fonts for better performance -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <style>
    /* ===================== CSS INTÉGRÉ OPTIMISÉ ===================== */
    
    :root {
      --primary-color: #25d366;
      --primary-dark: #128c7e;
      --background-dark: #111b21;
      --background-chat: #0b141a;
      --background-secondary: #202c33;
      --background-tertiary: #2a3942;
      --text-primary: #e9edef;
      --text-secondary: #8696a0;
      --border-color: #3b4a54;
      --danger-color: #e53e3e;
      --warning-color: #ffc107;
      --success-color: #25d366;
      --shadow-light: 0 2px 8px rgba(0, 0, 0, 0.15);
      --shadow-medium: 0 4px 16px rgba(0, 0, 0, 0.2);
      --shadow-heavy: 0 8px 32px rgba(0, 0, 0, 0.3);
      --border-radius: 12px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: var(--background-dark);
      color: var(--text-primary);
      overflow: hidden;
      line-height: 1.5;
      user-select: none;
    }

    /* ===================== SPLASH SCREEN ===================== */
    
    .splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #128c7e, #25d366);
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 3000;
      transition: opacity 0.5s ease-out;
    }

    .splash-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .splash-logo {
      width: 120px;
      height: 120px;
      background: white;
      border-radius: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 60px;
      margin-bottom: 30px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      animation: logoFloat 2s ease-in-out infinite;
    }

    @keyframes logoFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .splash-text {
      font-size: 28px;
      font-weight: 300;
      margin-bottom: 15px;
    }

    .splash-subtitle {
      font-size: 16px;
      opacity: 0.8;
      margin-bottom: 40px;
    }

    .splash-button {
      background: white;
      color: #128c7e;
      border: none;
      padding: 15px 40px;
      font-size: 16px;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .splash-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
    }

    /* ===================== INTERFACE D'APPEL ===================== */
    
    .call-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      color: white;
    }

    .call-overlay.active {
      display: flex;
      animation: slideInFromBottom 0.4s ease-out;
    }

    @keyframes slideInFromBottom {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }

    .call-duration {
      position: absolute;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 20px;
      font-weight: 300;
      background: rgba(0, 0, 0, 0.3);
      padding: 10px 20px;
      border-radius: 25px;
      backdrop-filter: blur(10px);
    }

    .call-header {
      text-align: center;
      margin-bottom: 50px;
    }

    .call-status {
      font-size: 18px;
      margin-bottom: 15px;
      opacity: 0.9;
      animation: pulse 2s infinite;
    }

    .call-contact-name {
      font-size: 36px;
      font-weight: 300;
      margin-bottom: 10px;
    }

    .call-contact-number {
      font-size: 16px;
      opacity: 0.7;
    }

    .call-avatar-large {
      width: 220px;
      height: 220px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 90px;
      font-weight: bold;
      margin-bottom: 60px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
      animation: callPulse 2s infinite;
    }

    @keyframes callPulse {
      0% { transform: scale(1); box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4); }
      50% { transform: scale(1.05); box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5); }
      100% { transform: scale(1); box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4); }
    }

    .call-controls {
      display: flex;
      gap: 50px;
      align-items: center;
    }

    .call-btn-large {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      transition: var(--transition);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }

    .call-btn-answer {
      background: linear-gradient(135deg, var(--success-color), var(--primary-dark));
      color: white;
    }

    .call-btn-answer:hover {
      transform: scale(1.15);
      box-shadow: 0 15px 40px rgba(37, 211, 102, 0.5);
    }

    .call-btn-decline {
      background: linear-gradient(135deg, var(--danger-color), #c53030);
      color: white;
    }

    .call-btn-decline:hover {
      transform: scale(1.15);
      box-shadow: 0 15px 40px rgba(229, 62, 62, 0.5);
    }

    /* ===================== CONTAINER PRINCIPAL ===================== */
    
    .chat-container {
      width: 100%;
      max-width: 1400px;
      height: 100vh;
      display: flex;
      background: var(--background-secondary);
      border-radius: 0;
      overflow: hidden;
      box-shadow: var(--shadow-heavy);
      margin: 0 auto;
    }

    /* ===================== SIDEBAR CONTACTS ===================== */
    
    #contacts-page {
      width: 420px;
      background: var(--background-dark);
      border-right: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      transition: var(--transition);
    }

    .contacts-header {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      padding: 25px;
      font-size: 20px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: var(--shadow-medium);
      position: relative;
      overflow: hidden;
    }

    .contacts-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
      pointer-events: none;
    }

    .search-container {
      padding: 20px;
      background: var(--background-dark);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .search-box {
      background: var(--background-tertiary);
      border-radius: 25px;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .search-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(37, 211, 102, 0.1), transparent);
      transition: left 0.6s ease;
    }

    .search-box:focus-within::before {
      left: 100%;
    }

    .search-box:focus-within {
      background: var(--border-color);
      transform: scale(1.02);
      box-shadow: 0 0 0 2px rgba(37, 211, 102, 0.4);
    }

    .search-box input {
      background: none;
      border: none;
      color: var(--text-primary);
      font-size: 15px;
      width: 100%;
      outline: none;
    }

    .search-box input::placeholder {
      color: var(--text-secondary);
    }

    .search-icon {
      color: var(--text-secondary);
      font-size: 18px;
      transition: var(--transition);
    }

    .search-box:focus-within .search-icon {
      color: var(--primary-color);
    }

    /* ===================== PROFIL UTILISATEUR ===================== */
    
    #my-number {
      background: linear-gradient(135deg, var(--background-tertiary), var(--background-secondary));
      padding: 20px 25px;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      gap: 15px;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    #my-number:hover {
      background: linear-gradient(135deg, var(--border-color), var(--background-tertiary));
      transform: translateX(5px);
    }

    #my-number::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(37, 211, 102, 0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    #my-number:hover::before {
      transform: translateX(100%);
    }

    .user-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      font-weight: bold;
      box-shadow: var(--shadow-medium);
      position: relative;
      transition: var(--transition);
    }

    .user-avatar:hover {
      transform: scale(1.1) rotate(5deg);
    }

    .user-avatar::after {
      content: '';
      position: absolute;
      bottom: 3px;
      right: 3px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--success-color);
      border: 3px solid var(--background-dark);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .user-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .user-name {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .user-status {
      font-size: 13px;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .user-actions {
      display: flex;
      gap: 10px;
    }

    .action-btn {
      background: rgba(37, 211, 102, 0.15);
      color: var(--primary-color);
      border: 1px solid rgba(37, 211, 102, 0.3);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .action-btn:hover {
      background: var(--primary-color);
      color: white;
      transform: scale(1.1) rotate(180deg);
    }

    .action-btn.delete-mode {
      background: rgba(229, 62, 62, 0.15);
      color: var(--danger-color);
      border-color: rgba(229, 62, 62, 0.3);
    }

    .action-btn.delete-mode:hover {
      background: var(--danger-color);
      color: white;
    }

    .action-btn.active {
      background: var(--danger-color);
      color: white;
      animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    /* ===================== LISTE CONTACTS ===================== */
    
    #phone-list {
      flex: 1;
      overflow-y: auto;
      background: var(--background-dark);
    }

    .contact-item {
      padding: 20px 25px;
      border-bottom: 1px solid rgba(42, 57, 66, 0.3);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 18px;
      color: var(--text-primary);
      position: relative;
      overflow: hidden;
    }

    .contact-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(37, 211, 102, 0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .contact-item:hover::before {
      transform: translateX(100%);
    }

    .contact-item:hover {
      background: linear-gradient(135deg, rgba(42, 57, 66, 0.8), rgba(59, 74, 84, 0.6));
      transform: translateX(8px);
      box-shadow: var(--shadow-medium);
    }

    .contact-item.active {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      transform: translateX(0);
      box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4);
    }

    .contact-avatar {
      width: 65px;
      height: 65px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 26px;
      flex-shrink: 0;
      box-shadow: var(--shadow-medium);
      transition: var(--transition);
      position: relative;
    }

    .contact-item:hover .contact-avatar {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
    }

    /* Couleurs d'avatars variées */
    .contact-item:nth-child(odd) .contact-avatar { background: linear-gradient(135deg, #FF6B6B, #FF8E53); }
    .contact-item:nth-child(even) .contact-avatar { background: linear-gradient(135deg, #4ECDC4, #44A08D); }
    .contact-item:nth-child(3n) .contact-avatar { background: linear-gradient(135deg, #45B7D1, #96C93D); }
    .contact-item:nth-child(4n) .contact-avatar { background: linear-gradient(135deg, #F093FB, #F5576C); }
    .contact-item:nth-child(5n) .contact-avatar { background: linear-gradient(135deg, #4FACFE, #00F2FE); }
    .contact-item:nth-child(6n) .contact-avatar { background: linear-gradient(135deg, #43E97B, #38F9D7); }

    .contact-avatar::after {
      content: '';
      position: absolute;
      bottom: 2px;
      right: 2px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--success-color);
      border: 3px solid var(--background-dark);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .contact-item.online .contact-avatar::after {
      opacity: 1;
      animation: pulse 2s infinite;
    }

    .contact-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-width: 0;
    }

    .contact-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 6px;
    }

    .contact-name {
      font-weight: 600;
      font-size: 17px;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .contact-item.active .contact-name {
      color: white;
    }

    .contact-time {
      font-size: 12px;
      color: var(--text-secondary);
      white-space: nowrap;
      margin-left: 10px;
    }

    .contact-item.active .contact-time {
      color: rgba(255, 255, 255, 0.8);
    }

    .contact-message-line {
      display: flex;
      align-items: center;
      gap: 6px;
      min-width: 0;
    }

    .message-status {
      flex-shrink: 0;
      font-size: 16px;
      margin-right: 6px;
    }

    .message-status.sent { color: var(--text-secondary); }
    .message-status.delivered { color: var(--text-secondary); }
    .message-status.read { color: var(--success-color); }

    .contact-item.active .message-status {
      color: rgba(255, 255, 255, 0.8);
    }

    .contact-last-message {
      font-size: 14px;
      color: var(--text-secondary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }

    .contact-item.active .contact-last-message {
      color: rgba(255, 255, 255, 0.8);
    }

    .notification-badge {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      border-radius: 15px;
      padding: 4px 10px;
      font-size: 11px;
      font-weight: bold;
      min-width: 24px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.5);
      animation: pulse 2s infinite;
      margin-left: 10px;
    }

    /* ===================== ZONE CHAT ===================== */
    
    #chat-page {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: var(--background-chat);
      transition: var(--transition);
    }

    .chat-header {
      background: linear-gradient(135deg, var(--background-secondary), var(--background-tertiary));
      color: var(--text-primary);
      padding: 20px 25px;
      font-weight: 500;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 17px;
      box-shadow: var(--shadow-light);
    }

    .chat-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 22px;
      box-shadow: var(--shadow-medium);
    }

    .chat-contact-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .chat-contact-name {
      font-size: 17px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .chat-contact-status {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .chat-actions {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .chat-action-btn {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 13px;
      transition: var(--transition);
      font-weight: 500;
    }

    .chat-action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(37, 211, 102, 0.4);
    }

    .chat-action-btn.back-btn {
      background: linear-gradient(135deg, var(--border-color), var(--background-tertiary));
    }

    .chat-action-btn.back-btn:hover {
      box-shadow: 0 8px 20px rgba(59, 74, 84, 0.4);
    }

    /* ===================== MESSAGES ===================== */
    
    #chat-box {
      flex: 1;
      overflow-y: auto;
      padding: 25px;
      background: var(--background-chat);
      background-image: 
        radial-gradient(circle at 25% 25%, rgba(255,255,255,0.02) 1px, transparent 1px),
        radial-gradient(circle at 75% 75%, rgba(255,255,255,0.02) 1px, transparent 1px);
      background-size: 50px 50px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .message {
      max-width: 75%;
      padding: 12px 18px;
      margin-bottom: 10px;
      border-radius: 15px;
      font-size: 14px;
      line-height: 1.5;
      position: relative;
      word-wrap: break-word;
      display: flex;
      flex-direction: column;
      box-shadow: var(--shadow-light);
      transition: var(--transition);
      animation: messageSlideIn 0.3s ease-out;
    }

    @keyframes messageSlideIn {
      from { 
        opacity: 0; 
        transform: translateY(20px) scale(0.95); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
      }
    }

    .message:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
    }

    .message.sent {
      align-self: flex-end;
      background: linear-gradient(135deg, #005c4b, var(--primary-dark));
      color: var(--text-primary);
      border-bottom-right-radius: 5px;
    }

    .message.received {
      align-self: flex-start;
      background: linear-gradient(135deg, var(--background-secondary), var(--background-tertiary));
      color: var(--text-primary);
      border-bottom-left-radius: 5px;
    }

    .message .timestamp {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.6);
      align-self: flex-end;
      margin-top: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .message.received .timestamp {
      align-self: flex-start;
      color: rgba(255, 255, 255, 0.5);
    }

    .message-status-indicator {
      font-size: 16px;
      margin-left: 6px;
    }

    .message-status-indicator.sent { color: var(--text-secondary); }
    .message-status-indicator.delivered { color: var(--text-secondary); }
    .message-status-indicator.read { color: var(--success-color); }

    .message img, .message video {
      max-width: 100%;
      border-radius: 12px;
      margin-top: 6px;
      box-shadow: var(--shadow-medium);
    }

    .message audio {
      margin-top: 6px;
      width: 100%;
    }

    .delete-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(229, 62, 62, 0.9);
      color: white;
      border: none;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      cursor: pointer;
      font-size: 12px;
      opacity: 0;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .message:hover .delete-btn {
      opacity: 1;
    }

    .delete-btn:hover {
      transform: scale(1.2);
      background: var(--danger-color);
    }

    /* ===================== INDICATEUR DE FRAPPE ===================== */
    
    .typing-indicator {
      display: none;
      align-items: center;
      gap: 10px;
      padding: 15px 25px;
      color: var(--text-secondary);
      font-size: 14px;
      font-style: italic;
    }

    .typing-indicator.show {
      display: flex;
    }

    .typing-dots {
      display: flex;
      gap: 4px;
    }

    .typing-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--text-secondary);
      animation: typingBounce 1.4s infinite;
    }

    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typingBounce {
      0%, 60%, 100% { transform: translateY(0); }
      30% { transform: translateY(-10px); }
    }

    /* ===================== ZONE SAISIE ===================== */
    
    .input-container {
      display: flex;
      align-items: center;
      padding: 20px 25px;
      background: linear-gradient(135deg, var(--background-secondary), var(--background-tertiary));
      gap: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .media-buttons {
      display: flex;
      gap: 12px;
    }

    .media-btn {
      font-size: 24px;
      cursor: pointer;
      color: var(--text-secondary);
      padding: 10px;
      border-radius: 50%;
      transition: var(--transition);
      position: relative;
    }

    .media-btn:hover {
      background: rgba(37, 211, 102, 0.15);
      color: var(--primary-color);
      transform: scale(1.2) rotate(15deg);
    }

    #chat-input {
      flex: 1;
      padding: 15px 25px;
      border-radius: 30px;
      border: none;
      font-size: 15px;
      outline: none;
      background: var(--border-color);
      color: var(--text-primary);
      transition: var(--transition);
    }

    #chat-input:focus {
      background: var(--border-color);
      transform: scale(1.02);
      box-shadow: 0 0 0 2px rgba(37, 211, 102, 0.4);
    }

    #chat-input::placeholder {
      color: var(--text-secondary);
    }

    #send-btn {
      width: 55px;
      height: 55px;
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      box-shadow: var(--shadow-medium);
    }

    #send-btn:hover {
      transform: scale(1.15) rotate(45deg);
      box-shadow: 0 10px 25px rgba(37, 211, 102, 0.6);
    }

    #send-btn:active {
      transform: scale(0.95);
    }

    /* ===================== CONTRÔLES AUDIO/APPEL ===================== */
    
    .audio-container, .call-container {
      padding: 15px 20px;
      text-align: center;
      background: linear-gradient(135deg, var(--background-secondary), var(--background-tertiary));
      border-top: 1px solid var(--border-color);
    }

    .audio-container h3, .call-container h3 {
      color: var(--text-primary);
      margin-bottom: 15px;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .control-btn {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      margin: 6px;
      font-size: 12px;
      transition: var(--transition);
      font-weight: 500;
    }

    .control-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
    }

    .control-btn:disabled {
      background: var(--border-color);
      color: var(--text-secondary);
      transform: none;
      box-shadow: none;
      cursor: not-allowed;
    }

    .control-btn.danger {
      background: linear-gradient(135deg, var(--danger-color), #c53030);
    }

    .control-btn.danger:hover {
      box-shadow: 0 6px 20px rgba(229, 62, 62, 0.4);
    }

    .connection-info {
      background: rgba(42, 57, 66, 0.8);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      padding: 12px 16px;
      border-radius: var(--border-radius);
      margin: 10px 0;
      font-size: 12px;
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    /* ===================== SCROLLBAR ===================== */
    
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
    }

    /* ===================== RESPONSIVE ===================== */
    
    @media (max-width: 768px) {
      .chat-container {
        height: 100vh;
        border-radius: 0;
        max-width: 100%;
      }
      
      #contacts-page {
        width: 100%;
        position: absolute;
        z-index: 10;
        height: 100%;
        transform: translateX(0);
      }

      #contacts-page.hidden {
        transform: translateX(-100%);
      }
      
      #chat-page {
        width: 100%;
        height: 100%;
      }

      .contact-item {
        padding: 15px 20px;
      }

      .message {
        max-width: 85%;
      }

      .input-container {
        padding: 15px 20px;
      }
      
      .call-overlay .call-avatar-large {
        width: 180px;
        height: 180px;
        font-size: 70px;
      }
      
      .call-controls {
        gap: 30px;
      }
      
      .call-btn-large {
        width: 65px;
        height: 65px;
        font-size: 28px;
      }
    }

    @media (max-width: 480px) {
      .contacts-header {
        font-size: 18px;
        padding: 20px;
      }

      .user-avatar {
        width: 50px;
        height: 50px;
        font-size: 20px;
      }

      .contact-avatar {
        width: 55px;
        height: 55px;
        font-size: 22px;
      }

      .chat-header {
        font-size: 16px;
        padding: 15px 20px;
      }

      .message {
        font-size: 13px;
        padding: 10px 14px;
      }

      #chat-input {
        font-size: 14px;
        padding: 12px 20px;
      }

      #send-btn {
        width: 45px;
        height: 45px;
        font-size: 18px;
      }

      .media-btn {
        font-size: 20px;
        padding: 8px;
      }
    }

    /* ===================== ACCESSIBILITÉ ===================== */
    
    .contact-item:focus,
    .chat-action-btn:focus,
    .action-btn:focus,
    .media-btn:focus,
    #chat-input:focus {
      outline: 2px solid var(--primary-color);
      outline-offset: 2px;
    }

    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Utilitaires */
    .hidden {
      display: none !important;
    }

    .invisible {
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>

<body>
  <!-- ===================== SPLASH SCREEN ===================== -->
  <div class="splash-screen" id="splash-screen">
    <div class="splash-logo">💬</div>
    <div class="splash-text">WhatsApp Web</div>
    <div class="splash-subtitle">Restez connecté avec vos proches où que vous soyez !</div>
    <button class="splash-button" id="start-app">Commencer</button>
  </div>

  <!-- ===================== INTERFACE D'APPEL ===================== -->
  <div class="call-overlay" id="call-overlay">
    <div class="call-duration" id="call-duration">00:00</div>
    
    <div class="call-header">
      <div class="call-status" id="call-status-text">Appel entrant...</div>
      <div class="call-contact-name" id="call-contact-name">Contact</div>
      <div class="call-contact-number" id="call-contact-number">+33 6 12 34 56 78</div>
    </div>
    
    <div class="call-avatar-large" id="call-avatar-large">C</div>
    
    <div class="call-controls">
      <button class="call-btn-large call-btn-decline" id="decline-call-btn" title="Raccrocher" aria-label="Raccrocher">
        📞
      </button>
      <button class="call-btn-large call-btn-answer" id="answer-call-btn" title="Répondre" aria-label="Répondre">
        📞
      </button>
    </div>
  </div>

  <!-- ===================== CONTAINER PRINCIPAL ===================== -->
  <div class="chat-container" id="main-container" style="display: none;">
    
    <!-- ===================== SIDEBAR CONTACTS ===================== -->
    <div id="contacts-page">
      <div class="contacts-header">
        <span style="font-size: 24px;">💬</span>
        Discussions
      </div>
      
      <!-- Barre de recherche -->
      <div class="search-container">
        <div class="search-box">
          <span class="search-icon">🔍</span>
          <input type="text" placeholder="Rechercher une discussion..." id="search-input" aria-label="Rechercher un contact">
        </div>
      </div>
      
      <!-- Profil utilisateur -->
      <div id="my-number">
        <div class="user-avatar">👤</div>
        <div class="user-info">
          <div class="user-name" id="user-name">Votre numéro</div>
          <div class="user-status">
            <span style="width: 8px; height: 8px; border-radius: 50%; background: var(--success-color); display: inline-block; animation: pulse 2s infinite;"></span>
            En ligne
          </div>
        </div>
        <div class="user-actions">
          <button class="action-btn" id="add-name-btn" title="Modifier le nom" aria-label="Modifier le nom">+</button>
          <button class="action-btn delete-mode" id="delete-mode-btn" title="Mode suppression" aria-label="Mode suppression">−</button>
        </div>
      </div>
      
      <!-- Liste des contacts -->
      <div id="phone-list" role="list" aria-label="Liste des contacts">
        <!-- Les contacts seront générés dynamiquement -->
      </div>
    </div>

    <!-- ===================== ZONE CHAT ===================== -->
    <div id="chat-page" style="display: none;">
      
      <!-- En-tête du chat -->
      <div class="chat-header">
        <div class="chat-avatar" id="chat-avatar">C</div>
        <div class="chat-contact-info">
          <div class="chat-contact-name" id="chat-contact-name">Sélectionnez un contact</div>
          <div class="chat-contact-status" id="chat-contact-status">Hors ligne</div>
        </div>
        <div class="chat-actions">
          <button class="chat-action-btn" id="call-btn" aria-label="Passer un appel">📞 Appeler</button>
          <button class="chat-action-btn back-btn" id="back-button" aria-label="Retour aux contacts">← Retour</button>
        </div>
      </div>
      
      <!-- Zone des messages -->
      <div id="chat-box" role="log" aria-label="Messages de conversation" aria-live="polite">
        <!-- Les messages apparaîtront ici -->
      </div>

      <!-- Indicateur de frappe -->
      <div class="typing-indicator" id="typing-indicator" aria-label="Contact en train d'écrire">
        <span>En train d'écrire</span>
        <div class="typing-dots">
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
        </div>
      </div>

      <!-- Zone de saisie -->
      <div class="input-container">
        <div class="media-buttons">
          <label for="image-input" class="media-btn" title="Envoyer une image" aria-label="Envoyer une image">📷</label>
          <input type="file" id="image-input" accept="image/*" hidden aria-label="Sélectionner une image">
          
          <label for="video-input" class="media-btn" title="Envoyer une vidéo" aria-label="Envoyer une vidéo">📹</label>
          <input type="file" id="video-input" accept="video/*" hidden aria-label="Sélectionner une vidéo">
        </div>
        
        <input type="text" id="chat-input" placeholder="Tapez un message..." aria-label="Saisir un message" autocomplete="off">
        
        <button id="send-btn" aria-label="Envoyer le message" title="Envoyer">➤</button>
      </div>

      <!-- Contrôles audio -->
      <div class="audio-container">
        <h3>🎤 Message vocal</h3>
        <button class="control-btn" id="record-btn" aria-label="Enregistrer un message audio">🎙️ Enregistrer</button>
        <button class="control-btn" id="stop-btn" disabled aria-label="Arrêter l'enregistrement">⏹️ Arrêter</button>
        <div id="audio-messages" aria-label="Messages audio"></div>
      </div>

      <!-- Contrôles d'appel -->
      <div class="call-container">
        <h3>📞 Appel vocal</h3>
        <div id="call-info" class="connection-info" style="display: none;">
          <span>ID d'appel: <span id="current-call-id"></span></span>
          <button id="copy-call-id" class="control-btn" title="Copier l'ID d'appel">📋 Copier</button>
        </div>
        <button class="control-btn" id="answer-btn" aria-label="Répondre à un appel">✅ Répondre</button>
        <button class="control-btn danger" id="hangup-btn" disabled aria-label="Terminer l'appel">❌ Terminer</button>
        <audio id="remote-audio" controls autoplay style="width: 100%; margin-top: 10px;" aria-label="Audio de l'appel distant"></audio>
      </div>
    </div>
  </div>

  <!-- ===================== JAVASCRIPT ===================== -->
  <script type="module" src="societe.js" defer></script>
  
  <script>
    // ===================== FONCTIONS GLOBALES =====================
    
    // Gestion du splash screen
    document.addEventListener('DOMContentLoaded', function() {
      const startBtn = document.getElementById('start-app');
      const splashScreen = document.getElementById('splash-screen');
      const mainContainer = document.getElementById('main-container');
      
      // Gestion du bouton start
      if (startBtn) {
        startBtn.addEventListener('click', function() {
          splashScreen.classList.add('hidden');
          setTimeout(() => {
            if (mainContainer) {
              mainContainer.style.display = 'flex';
            }
            splashScreen.style.display = 'none';
          }, 500);
        });
      }
      
      // Auto-hide splash screen après 3 secondes
      setTimeout(() => {
        if (splashScreen && !splashScreen.classList.contains('hidden')) {
          startBtn.click();
        }
      }, 3000);
    });

    // Fonctions globales pour l'interface d'appel (compatibilité)
    window.showCallInterface = function(contactName, contactNumber, isIncoming = true) {
      const overlay = document.getElementById('call-overlay');
      const statusText = document.getElementById('call-status-text');
      const nameElement = document.getElementById('call-contact-name');
      const numberElement = document.getElementById('call-contact-number');
      const avatarElement = document.getElementById('call-avatar-large');
      const answerBtn = document.getElementById('answer-call-btn');
      
      if (!overlay) return;
      
      overlay.classList.add('active');
      if (nameElement) nameElement.textContent = contactName;
      if (numberElement) numberElement.textContent = contactNumber;
      if (avatarElement) avatarElement.textContent = contactName.charAt(0);
      
      if (isIncoming) {
        if (statusText) statusText.textContent = 'Appel entrant...';
        if (answerBtn) answerBtn.style.display = 'flex';
      } else {
        if (statusText) statusText.textContent = 'Appel en cours...';
        if (answerBtn) answerBtn.style.display = 'none';
      }
    };

    window.hideCallInterface = function() {
      const overlay = document.getElementById('call-overlay');
      if (overlay) {
        overlay.classList.remove('active');
      }
    };

    window.endCall = function() {
      if (window.whatsappApp) {
        window.whatsappApp.endCall();
      }
    };

    window.answerCall = function() {
      if (window.whatsappApp) {
        window.whatsappApp.answerCall();
      }
    };

    // Service Worker pour PWA
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(registration => {
          console.log('✅ Service Worker enregistré:', registration.scope);
        })
        .catch(error => {
          console.log('ℹ️ Service Worker non disponible');
        });
    }

    // Gestion des erreurs globales
    window.addEventListener('error', function(e) {
      console.error('Erreur JavaScript:', e.error);
    });

    window.addEventListener('unhandledrejection', function(e) {
      console.error('Promise rejetée:', e.reason);
    });

    console.log('🎉 WhatsApp Web - Interface chargée avec succès!');
  </script>
</body>
</html>